---
title: "さくらのウェブアクセラレータをさくらのレンタルサーバーで使う"
date: 2019-05-03T11:23:35+09:00
draft: false
---

※この記事は以前別ブログに掲載していたものを加筆修正し、再度公開したものです。  

どうもnafです。今回はさくらのレンタルサーバーで動かしているWordPressに[さくらのウェブアクセラレータ](https://sakura.ad.jp/services/cdn/)を使ってみました。  

# さくらのウェブアクセラレータとは
一言でいうとCDNです。CDNとはコンテンツデリバリネットワークの略称です。  
ざっくり説明すると、オリジンサーバからファイルをキャッシュしてエンドユーザーに近いサーバから高速にwebを配信をするサービスの事です。  


# なぜレンタルサーバーにCDNを使うのか
レンタルサーバーは多くの場合、共有サーバーとなっており、下位プランだと予測が出来ない突発的なアクセス増には耐えきれずに503エラーが出ることが多いです。  

そこでCDNサービスを使いコンテンツをキャッシュすることで、高速に安定したサイト運営ができるようになります。  

## Webアクセラレータの利点
- さくらのクラウドのアカウントがあれば500GiB分無償で使える
- 日本内にサーバーがあるのでレスポンスが良い
- APIとドキュメントが豊富
## Webアクセラレータの欠点
- キャッシュが Cache-Control: s-maxageレスポンスヘッダで制御されるので変更する必要がある。
- サーバーが国内のみなので世界向けなサイトにはあまり有効ではない
# WordPressへの導入
Cache controlを付けないといけないので面倒そうですが便利なプラグインがあります。

[https://github.com/yamamoto-febc/wp-sacloud-webaccel](https://github.com/yamamoto-febc/wp-sacloud-webaccel)

WordPressの管理画面からインストールできるため簡単に導入できます。  


あとは下の画像の通り設定をすれば導入は完了です。  
{{< figure src="/img/sakura01.webp" >}}


デベロッパーツールで確認するとちゃんとキャッシュされていることが分かります。  
{{< figure src="/img/sakura02.webp" >}}


便利で簡単に導入でき、500GiBまで無償なのでぜひ皆さんも試してみてください。  

