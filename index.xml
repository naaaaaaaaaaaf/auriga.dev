<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Auriga.dev</title><link>https://auriga.dev/</link><description>Recent content on Auriga.dev</description><generator>Hugo -- gohugo.io</generator><language>ja-JP</language><lastBuildDate>Thu, 21 Mar 2024 22:34:39 +0900</lastBuildDate><atom:link href="https://auriga.dev/index.xml" rel="self" type="application/rss+xml"/><item><title>Freenomのドメインをメインで使うのはやめろ2(ツー)</title><link>https://auriga.dev/post/do-not-use-freenom-2/</link><pubDate>Thu, 21 Mar 2024 22:34:39 +0900</pubDate><guid>https://auriga.dev/post/do-not-use-freenom-2/</guid><description>こんにちは Naf です。
以前(2年ぐらい前)にこんな記事を投稿しました。
その記事ではgaドメインで障害が発生してサイトに繋がらなくなってしまったという重大な事案を取り上げました。
時は流れ… 記事にするってことは何かあったということで、Freenom周りにいろいろ動きがあります。
大きい動きとして、Meta社からの訴訟によりFreenomがドメインレジストリ事業から撤退する？という噂が立っています。
この記事によると
Cloudflareのドメイン喪失: Cloudflareは、Freenomの.tkドメインシャットダウンにより、保有するドメインの22%を失いました。 Freenomの影響: Freenomは、無料の.tkドメインを提供していたことで知られており、そのシャットダウンは多くのウェブサイトに影響を与えました。 Cloudflareの対応: Cloudflareはこの問題に対処するための措置を講じていますが、詳細な対応策はページには記載されていません。 影響の範囲: このシャットダウンにより影響を受けたのはCloudflareだけでなく、他の多くのウェブサイトやオンラインサービスも含まれています。 とのことです。(By chatGPT)
いままで私は auri.ga というドメインをメインに利用していましたが、2年前の件で懲りてメールアドレスについてはauriga.devドメインを利用しています。そのため、突然auri.gaが停止されてもサイトの内容を移せば問題ないです。しかし、長年使ったこのドメインは手放したくないので延命措置を考え、やってみました。
gaドメインの移管 Freenomがやばい！ということなのでFreenomから他の良い(普通)レジストラにドメインを移管すればええやん！と思い、gaドメインを扱っている数少ないレジストラのGandiに移管してみようとしました。
ちなみにgaドメインを扱っているレジストラはmon.gaから確認できます。あんまないです。
Gandiはgaドメインの移管に結構お金が必要で、以下の通りドメインの移管料金+企業向けサービスの契約が必要です。計12000円ぐらいで結構必要です。
これを支払い、Freenomから提供されるTransfer Authorization CodeをGandiに入力すれば移管が完了します、が、結果から言うと失敗しました…
そもそもTransfer Authorization Codeが違うと言われ、移管が一切できなくなりました。オワタ
連絡が取れない… Transfer Authorization Codeが違うならFreenomに問い合わせればいいじゃない ということで問い合わせましたが、返信が来ない！！！ この画像のとおり、1ヶ月以上経っても返信がありませんでした。また、メールサポートにも連絡を入れましたがこれも返信が来ない…
まあ、前述の件でいろいろあるのかもしれません…(せめて返信はしてほしい)
一応Gandi側にも問い合わせたところ、 ANiNFかAFNICに問い合わせたら？と返信がありましたが、ANiNFからは「gaドメインは管理してないからnic-ga.comに問い合わせて」と、AFNICはサイトが落ちてて連絡先の情報が得られませんでした。
nic-ga.comにも問い合わせを送っていますが、2024年3月時点で返信はありません。
移管を諦め、恐怖のドメイン更新へ… こうなったらもうどうしようもないためGandiへの移管を諦めました。
いまのところは問題ないのですが、auri.gaは3月末でドメインの期限が到来します。
21日時点でFreenomから更新ができない状態でこれまたサポートに問い合わせてますが、前述の件もあってどうなるか分かりません。突然消えたらそういうことだと思ってください…</description></item><item><title>LinodeのNVMeストレージを試す</title><link>https://auriga.dev/post/try-linode-nvme/</link><pubDate>Thu, 03 Mar 2022 11:41:00 +0900</pubDate><guid>https://auriga.dev/post/try-linode-nvme/</guid><description>※この記事は以前別ブログに掲載していたものを加筆修正し、再度公開したものです。
こんにちは Nafです。
今回はLinodeで提供されているブロックストレージ(NVMe SSD版)をベンチマークしてみました。
このNVMe SSDは以前から一部のリージョンで使用可能だったのですが、最近東京リージョンで提供開始されました。
(提供開始されたらメール通知するやつを申し込んだのにメールは来なかった…)
準備 まずはテスト用のサーバーを立ち上げます。
今回はLinode 2GBのプランでサーバーを作成しました。
後に作成するブロックストレージと同じリージョンでサーバーを作らないと、ストレージがアタッチできないので注意しましょう。
その後、サーバーにアタッチする用のボリュームを作成します。
現時点(2022年3月)ではNVMeストレージは全てのリージョンで利用可能とのことです。
NVMeで作成されたボリュームは専用の表示があるため、簡単に見分けが付きます。
ボリュームをアタッチしたら、マウントを行います。
マウント手順は「Show Config」から詳しく見ることができます。便利
いざベンチマーク さて、準備ができたので実際にどれくらいの性能なのか、ベンチマークを行います。
今回、ベンチマークはPostgreSQLのベンチマークツールであるpgbenchを利用しました。(当初ブロックストレージをデーターベース用に考えていたため)
まずはpgbenchのセットアップから始めます。
確か、postgresql-contribのパッケージにpgbenchが入っていた記憶…
[naf@localhost ~]$ sudo dnf install postgresql postgresql-server postgresql-contrib pgbenchがインストールできたら早速ベンチマークを取ります。
まずはtest_dbに対して初期化をします。
[postgres@localhost ~]$ pgbench -i test_db dropping old tables... NOTICE: table &amp;#34;pgbench_accounts&amp;#34; does not exist, skipping NOTICE: table &amp;#34;pgbench_branches&amp;#34; does not exist, skipping NOTICE: table &amp;#34;pgbench_history&amp;#34; does not exist, skipping NOTICE: table &amp;#34;pgbench_tellers&amp;#34; does not exist, skipping creating tables.</description></item><item><title>Freenomのドメインをメインで使うのはやめろ</title><link>https://auriga.dev/post/do-not-use-freenom/</link><pubDate>Mon, 21 Feb 2022 15:43:16 +0900</pubDate><guid>https://auriga.dev/post/do-not-use-freenom/</guid><description>なにが言いたい Freenomの無料ドメイン(.ga .tk .cf .ml)は突然長時間の障害が起きる可能性があるのでメインで使うのはやめろ
経緯 こんにちは Naf です。
みなさーん！Freenom、使ってますか〜？
地獄に落ちろ！！！！！！！！！！ 私はFreenomでauri.gaというドメインを取得して利用していたのですが、ある日(2022年2月11日ごろから)突然アクセス出来無くなりました。
てっきり最初はネームサーバーの問題かと思い、ConoHaの障害情報を調べたりしていたのですが、情報が出て来ず、意味不明でした。(ConoHaからLinodeにネームサーバーを変更したりしたが結果変わらず)
よくよく、digで名前解決をしてみると、一部のサーバーのみ名前解決ができなくなっていることに気が付きました。
具体的に見ると、Google DNS (8.8.8.8)からは正常に引けずに、Cloudflare DNS (1.1.1.1)からは正常に引けるようになっていました。
そこでGoogle DNSがおかしい？と思い、Google DNSのキャッシュクリアをサイトにアクセスして実行してみました…が、結局改善しませんでした。
そういえば 昔、ioドメインで障害が起き、名前解決が出来無いという事案があったのを思い出し、それと同じような状況なのか調べてみました。
Qiitaで見つけた記事のように適当なドメインをdigしてみます。
$ dig example.ga +trace ; &amp;lt;&amp;lt;&amp;gt;&amp;gt; DiG 9.16.1-Ubuntu &amp;lt;&amp;lt;&amp;gt;&amp;gt; example.ga +trace ;; global options: +cmd . 53 IN NS g.root-servers.net. . 53 IN NS h.root-servers.net. . 53 IN NS i.root-servers.net. . 53 IN NS j.root-servers.net. . 53 IN NS k.root-servers.net. . 53 IN NS l.</description></item><item><title>LineageOS 16から17.1にアップデートした</title><link>https://auriga.dev/post/lineage-upgrade/</link><pubDate>Sun, 20 Dec 2020 10:00:00 +0900</pubDate><guid>https://auriga.dev/post/lineage-upgrade/</guid><description>naaaaaaaaaaafです。
OnePlus5T君は、デフォルトでOxygenOSとかいうよく分からんOSが入っています。ググってみるとOxygenOSの良い点みたいな記事 もあるのですが、ピュアっぽいAndroidを使いたかったので、2年前にこのスマホを買った時から Lineage OSを導入しています。
Lineage OS のサイトを見ると分かるように、OnePlus5Tは公式のイメージが配布されており、手軽にRomを変えることができます。アップデートも端末の設定から行うことが出来き、とても便利です。
しかし、表題にある通りLineage OS 16 -&amp;gt; Lineage OS 17.1 のようなアップデートは設定から行えず、パソコンから行う形になります。
今回はそのアップデートの方法について、前(15から16)までと変わっていたため簡単にまとめました。
(なお、現在はZoomやmeet用のWebカメラとして役割を任されています)
ドキュメントを読む 読め アップデートについてのドキュメント
Firmwareを更新し、TWRPから「Advance -&amp;gt; ADB sideloadみたいなやつ」を選択し、パソコンから更新するイメージをadb sideloadするだけです。
Open GAPPSを入れている人は起動する前に、一緒にsideloadしましょう。
sideloadはいい感じに差分データーをインストールしてくれるため、特にリセットをする必要もなく、アップデートをインストールできます。便利ですね。
よかったね</description></item><item><title>Linodeのオブジェクトストレージ(Beta版)を試す</title><link>https://auriga.dev/post/use-linode-objectstorage-beta/</link><pubDate>Thu, 27 Jun 2019 00:00:00 +0000</pubDate><guid>https://auriga.dev/post/use-linode-objectstorage-beta/</guid><description> LinodeよりS3互換のオブジェクトストレージの先行利用権を貰ったため試してみました。
※事前にオブジェクトストレージについてのアンケートに答えたため先行利用権が貰えたようです。現在はサポートチケットを切ると貰えるようです(参考)
Cloud Managerから使ってみる Cloud ManagerにアクセスするとObject Storageが追加されているのがわかります。
ここから新たなバケットを作ることができます。
現時点ではリージョンはニュージャージーのみ提供のようです。(おそらく東京リージョンも追加されると思われます。)
バケットを作成しました。ですが、今はCloud Managerからファイルをアップロードしたり権限の編集をすることは出来ないようです。そのため他のツールで操作してみます。
Cyberduckでファイルのアップロードをする s3互換のストレージなのでs3cmd等のコマンドラインツールも使えるのですが面倒なのでGUIで操作できる「Cyberduck」を使ってみます。
Cyberduckをインストール後、Cloud Managerで発行したアクセスキーとシークレット、エンドポイント(us-east-1.linodeobjects.com)を入力します。
これで接続が完了します。
アップロード後、権限を修正する場合はファイルを選択し情報-&amp;gt;アクセス権より編集が可能です。
アップロードした画像: https://mstdn.us-east-1.linodeobjects.com/28683404.png
現時点で出来ないこと 重複しますがまとめておきます。
Cloud Managerからのファイル操作 他のリージョンの利用(現在はニュージャージーのみ) カスタムドメイン、証明書の利用 現在はBeta版での提供なのでおそらくこれらのことは出来るようになると思います。
料金について 料金はストレージ利用料が250GBにつき5ドル(超過分は1GBあたり0.02ドル)、転送量が1GBあたり0.02ドルとなっています。
しかし、Linodeで既にインスタンスを持っている場合は、そちらの転送プールが優先的に利用されるようです。
そのため、Linodeで沢山インスタンスを持っているユーザーは転送量のことは気にせず利用できそうです。
料金体系はこの転送量課金以外はDigitalOceanのSpacesとほぼ同じです。このBeta版の機会に試してみては如何でしょうか。
Linodeに登録</description></item><item><title>GCSからDigitalOceanのSpacesに移行する</title><link>https://auriga.dev/post/migrate-digitalocean-from-gcs/</link><pubDate>Tue, 25 Jun 2019 11:30:48 +0900</pubDate><guid>https://auriga.dev/post/migrate-digitalocean-from-gcs/</guid><description>※この記事は以前別ブログに掲載していたものを加筆修正し、再度公開したものです。
どうもnafです。今回はGoogle Cloud StorageからDigitalOceanのS3互換ストレージ「Spaces」に移行してみたので、手順などを書きます。
DigitalOceanって何？ DigitalOcean のホームページ クラウド事業者が提供しているサービスの名称です。
現在、日本語には対応していませんが、普通に登録ができます。また、日本リージョンも提供していないのですが、シンガポールリージョンがあるため日本からのアクセスはそこまで悪くなりません。
競合のサービスとしては、LinodeやVultrがよく挙げられますね。
なぜDigitalOceanにするのか DigitalOceanでは先に挙げたようなLinode,Vultrでは提供していないS3互換ストレージサービス(Spaces)を提供しています。 このサービスはディスク使用量が250GBまで5ドルの定額制になっています。また、転送量も1TBまで無料なので純粋にコストパフォーマンスが高いです。(超過した場合は1GB/0.01$)
また、無料で提供しているCDNサービスのノードが東京にもあるようなので、レイテンシの問題もありません。そのため、DigitalOceanのSpacesを利用することにしました。
GCSからメディアファイルを移行する 私はGCSからSpacesへ移行する際に2つのツールを試してみました。順に紹介します。
Minio client Minioというオープンソースのストレージ用のクライアントです。全然情報が無くて困っていたのですが、どうやらS3互換のストレージサービスを複数登録してメディアの移動が出来るみたいなので使ってみました。 mc config host add gcs https://storage.googleapis.com &amp;lt;YOUR-ACCESS-KEY&amp;gt; &amp;lt;YOUR-SECRET-KEY&amp;gt; #gcsを登録 mc config host add do https://&amp;lt;BUCKET&amp;gt;.sgp1.digitaloceanspaces.com &amp;lt;YOUR-ACCESS-KEY&amp;gt; &amp;lt;YOUR-SECRET-KEY&amp;gt; #DigitalOceanを登録 mc mirror gcs do #mirrorコマンドで同期 これで同期が開始されます。同期はかなり速く、大容量のバケットでもすぐ終わるのですが、どうやらGCS側で公開設定にしていたファイルがDigitalOcean側で非公開になってしまうようです。(全然使えねーじゃん)
rclone そこでクラウドストレージ間の同期に特化しているお馴染のrcloneを使うことにしました。 rcloneの設定はめっちゃ優しい対話式なので割愛します。
rclone sync gcs do -P これで同期が開始されます。Minio clientと違い詳細にログを出すことが可能です。ですが、rcloneはかなり真面目に同期をするので結構時間がかかります。大容量のバケットを同期する時は注意しましょう。
これでGCSからDigitalOceanのSpacesへの移行が完了しました。作業自体はコマンドを何個か打つだけなので簡単です。SpacesはGCSやS3などから移行したいと考えている人にはおすすめのサービスかと思います。この機会に移行してみてはいかがでしょうか。
最後に無料クレジットが貰える紹介リンクを貼っておきます。
DigitalOceanに登録
※GCSやS3はファイルの操作が課金対象になるため、調子に乗って何回も同期するとクラウド破産する可能性があります。計画的に使用してください。</description></item><item><title>さくらのウェブアクセラレータをさくらのレンタルサーバーで使う</title><link>https://auriga.dev/post/sakura-cdn/</link><pubDate>Fri, 03 May 2019 11:23:35 +0900</pubDate><guid>https://auriga.dev/post/sakura-cdn/</guid><description>※この記事は以前別ブログに掲載していたものを加筆修正し、再度公開したものです。
どうもnafです。今回はさくらのレンタルサーバーで動かしているWordPressにさくらのウェブアクセラレータを使ってみました。
さくらのウェブアクセラレータとは 一言でいうとCDNです。CDNとはコンテンツデリバリネットワークの略称です。
ざっくり説明すると、オリジンサーバからファイルをキャッシュしてエンドユーザーに近いサーバから高速にwebを配信をするサービスの事です。
なぜレンタルサーバーにCDNを使うのか レンタルサーバーは多くの場合、共有サーバーとなっており、下位プランだと予測が出来ない突発的なアクセス増には耐えきれずに503エラーが出ることが多いです。
そこでCDNサービスを使いコンテンツをキャッシュすることで、高速に安定したサイト運営ができるようになります。
Webアクセラレータの利点 さくらのクラウドのアカウントがあれば500GiB分無償で使える 日本内にサーバーがあるのでレスポンスが良い APIとドキュメントが豊富 Webアクセラレータの欠点 キャッシュが Cache-Control: s-maxageレスポンスヘッダで制御されるので変更する必要がある。 サーバーが国内のみなので世界向けなサイトにはあまり有効ではない WordPressへの導入 Cache controlを付けないといけないので面倒そうですが便利なプラグインがあります。
https://github.com/yamamoto-febc/wp-sacloud-webaccel
WordPressの管理画面からインストールできるため簡単に導入できます。
あとは下の画像の通り設定をすれば導入は完了です。
デベロッパーツールで確認するとちゃんとキャッシュされていることが分かります。
便利で簡単に導入でき、500GiBまで無償なのでぜひ皆さんも試してみてください。</description></item></channel></rss>